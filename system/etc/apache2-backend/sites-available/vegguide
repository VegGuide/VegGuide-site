# modules needed:
#   auth_basic
#   authz_default
#   authz_host  (order, deny)
#   perl

<IfDefine !Testing>
    CustomLog /var/log/apache2-backend/access.log combined
</IfDefine>

<IfDefine Testing>
    CustomLog /home/autarch/.vegguide/var/log/apache2-backend/access.log combined
    <Perl>
        use Cwd qw( abs_path );
        # Need both for some reason, freaking mod_perl
        use lib abs_path('./lib');
        $ENV{PERL5LIB} = abs_path('./lib');
    </Perl>

    PerlModule Apache2::Reload
    PerlInitHandler Apache2::Reload
    PerlSetVar ReloadAll Off
    PerlSetVar ReloadModules "VegGuide VegGuide::*"
</IfDefine>

Listen localhost:8088

PerlOptions +Autoload

<Location />
    SetHandler modperl
    PerlResponseHandler VegGuide
</Location>
